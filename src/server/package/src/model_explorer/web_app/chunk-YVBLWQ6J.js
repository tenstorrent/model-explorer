import{a as X}from"./chunk-E54BXXSZ.js";import{a as Q}from"./chunk-W6OGDNWL.js";import{b as U,c as v,d as $,e as D,f as w,g as u}from"./chunk-B26MAMVN.js";import{a as J,b as q,f as h}from"./chunk-YF6DGJ2Q.js";var T=class{constructor(t,e){this._modeId=t,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker()),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange(()=>this._updateExtraLibs())}dispose(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}_updateExtraLibs(){return h(this,null,function*(){if(!this._worker)return;let t=++this._updateExtraLibsToken,e=yield this._worker.getProxy();this._updateExtraLibsToken===t&&e.updateExtraLibs(this._defaults.getExtraLibs())})}_getClient(){return this._client||(this._client=h(this,null,function*(){return this._worker=Q({moduleId:"vs/language/typescript/tsWorker",createWorker:()=>new Worker(new URL("ts.worker.js",import.meta.url),{type:"module"}),label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}}),this._defaults.getEagerModelSync()?yield this._worker.withSyncedResources(w.getModels().filter(t=>t.getLanguageId()===this._modeId).map(t=>t.uri)):yield this._worker.getProxy()})),this._client}getLanguageServiceWorker(...t){return h(this,null,function*(){let e=yield this._getClient();return this._worker&&(yield this._worker.withSyncedResources(t)),e})}};var r={};r["lib.d.ts"]=!0;r["lib.decorators.d.ts"]=!0;r["lib.decorators.legacy.d.ts"]=!0;r["lib.dom.asynciterable.d.ts"]=!0;r["lib.dom.d.ts"]=!0;r["lib.dom.iterable.d.ts"]=!0;r["lib.es2015.collection.d.ts"]=!0;r["lib.es2015.core.d.ts"]=!0;r["lib.es2015.d.ts"]=!0;r["lib.es2015.generator.d.ts"]=!0;r["lib.es2015.iterable.d.ts"]=!0;r["lib.es2015.promise.d.ts"]=!0;r["lib.es2015.proxy.d.ts"]=!0;r["lib.es2015.reflect.d.ts"]=!0;r["lib.es2015.symbol.d.ts"]=!0;r["lib.es2015.symbol.wellknown.d.ts"]=!0;r["lib.es2016.array.include.d.ts"]=!0;r["lib.es2016.d.ts"]=!0;r["lib.es2016.full.d.ts"]=!0;r["lib.es2016.intl.d.ts"]=!0;r["lib.es2017.arraybuffer.d.ts"]=!0;r["lib.es2017.d.ts"]=!0;r["lib.es2017.date.d.ts"]=!0;r["lib.es2017.full.d.ts"]=!0;r["lib.es2017.intl.d.ts"]=!0;r["lib.es2017.object.d.ts"]=!0;r["lib.es2017.sharedmemory.d.ts"]=!0;r["lib.es2017.string.d.ts"]=!0;r["lib.es2017.typedarrays.d.ts"]=!0;r["lib.es2018.asyncgenerator.d.ts"]=!0;r["lib.es2018.asynciterable.d.ts"]=!0;r["lib.es2018.d.ts"]=!0;r["lib.es2018.full.d.ts"]=!0;r["lib.es2018.intl.d.ts"]=!0;r["lib.es2018.promise.d.ts"]=!0;r["lib.es2018.regexp.d.ts"]=!0;r["lib.es2019.array.d.ts"]=!0;r["lib.es2019.d.ts"]=!0;r["lib.es2019.full.d.ts"]=!0;r["lib.es2019.intl.d.ts"]=!0;r["lib.es2019.object.d.ts"]=!0;r["lib.es2019.string.d.ts"]=!0;r["lib.es2019.symbol.d.ts"]=!0;r["lib.es2020.bigint.d.ts"]=!0;r["lib.es2020.d.ts"]=!0;r["lib.es2020.date.d.ts"]=!0;r["lib.es2020.full.d.ts"]=!0;r["lib.es2020.intl.d.ts"]=!0;r["lib.es2020.number.d.ts"]=!0;r["lib.es2020.promise.d.ts"]=!0;r["lib.es2020.sharedmemory.d.ts"]=!0;r["lib.es2020.string.d.ts"]=!0;r["lib.es2020.symbol.wellknown.d.ts"]=!0;r["lib.es2021.d.ts"]=!0;r["lib.es2021.full.d.ts"]=!0;r["lib.es2021.intl.d.ts"]=!0;r["lib.es2021.promise.d.ts"]=!0;r["lib.es2021.string.d.ts"]=!0;r["lib.es2021.weakref.d.ts"]=!0;r["lib.es2022.array.d.ts"]=!0;r["lib.es2022.d.ts"]=!0;r["lib.es2022.error.d.ts"]=!0;r["lib.es2022.full.d.ts"]=!0;r["lib.es2022.intl.d.ts"]=!0;r["lib.es2022.object.d.ts"]=!0;r["lib.es2022.regexp.d.ts"]=!0;r["lib.es2022.string.d.ts"]=!0;r["lib.es2023.array.d.ts"]=!0;r["lib.es2023.collection.d.ts"]=!0;r["lib.es2023.d.ts"]=!0;r["lib.es2023.full.d.ts"]=!0;r["lib.es2023.intl.d.ts"]=!0;r["lib.es2024.arraybuffer.d.ts"]=!0;r["lib.es2024.collection.d.ts"]=!0;r["lib.es2024.d.ts"]=!0;r["lib.es2024.full.d.ts"]=!0;r["lib.es2024.object.d.ts"]=!0;r["lib.es2024.promise.d.ts"]=!0;r["lib.es2024.regexp.d.ts"]=!0;r["lib.es2024.sharedmemory.d.ts"]=!0;r["lib.es2024.string.d.ts"]=!0;r["lib.es5.d.ts"]=!0;r["lib.es6.d.ts"]=!0;r["lib.esnext.array.d.ts"]=!0;r["lib.esnext.collection.d.ts"]=!0;r["lib.esnext.d.ts"]=!0;r["lib.esnext.decorators.d.ts"]=!0;r["lib.esnext.disposable.d.ts"]=!0;r["lib.esnext.error.d.ts"]=!0;r["lib.esnext.float16.d.ts"]=!0;r["lib.esnext.full.d.ts"]=!0;r["lib.esnext.intl.d.ts"]=!0;r["lib.esnext.iterator.d.ts"]=!0;r["lib.esnext.promise.d.ts"]=!0;r["lib.esnext.sharedmemory.d.ts"]=!0;r["lib.scripthost.d.ts"]=!0;r["lib.webworker.asynciterable.d.ts"]=!0;r["lib.webworker.d.ts"]=!0;r["lib.webworker.importscripts.d.ts"]=!0;r["lib.webworker.iterable.d.ts"]=!0;function L(i,t,e=0){if(typeof i=="string")return i;if(i===void 0)return"";let a="";if(e){a+=t;for(let o=0;o<e;o++)a+="  "}if(a+=i.messageText,e++,i.next)for(let o of i.next)a+=L(o,t,e);return a}function k(i){return i?i.map(t=>t.text).join(""):""}var _=class{constructor(t){this._worker=t}_textSpanToRange(t,e){let a=t.getPositionAt(e.start),o=t.getPositionAt(e.start+e.length),{lineNumber:l,column:m}=a,{lineNumber:n,column:s}=o;return{startLineNumber:l,startColumn:m,endLineNumber:n,endColumn:s}}},A=class{constructor(t){this._worker=t,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}isLibFile(t){return t&&t.path.indexOf("/lib.")===0?!!r[t.path.slice(1)]:!1}getOrCreateModel(t){let e=D.parse(t),a=w.getModel(e);if(a)return a;if(this.isLibFile(e)&&this._hasFetchedLibFiles)return w.createModel(this._libFiles[e.path.slice(1)],"typescript",e);let o=X.getExtraLibs()[t];return o?w.createModel(o.content,"typescript",e):null}_containsLibFile(t){for(let e of t)if(this.isLibFile(e))return!0;return!1}fetchLibFilesIfNecessary(t){return h(this,null,function*(){this._containsLibFile(t)&&(yield this._fetchLibFiles())})}_fetchLibFiles(){return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then(t=>t.getLibFiles()).then(t=>{this._hasFetchedLibFiles=!0,this._libFiles=t})),this._fetchLibFilesPromise}},P=class extends _{constructor(t,e,a,o){super(o),this._libFiles=t,this._defaults=e,this._selector=a,this._disposables=[],this._listener=Object.create(null);let l=s=>{if(s.getLanguageId()!==a)return;let c=()=>{let{onlyVisible:b}=this._defaults.getDiagnosticsOptions();b?s.isAttachedToEditor()&&this._doValidate(s):this._doValidate(s)},p,d=s.onDidChangeContent(()=>{clearTimeout(p),p=window.setTimeout(c,500)}),g=s.onDidChangeAttached(()=>{let{onlyVisible:b}=this._defaults.getDiagnosticsOptions();b&&(s.isAttachedToEditor()?c():w.setModelMarkers(s,this._selector,[]))});this._listener[s.uri.toString()]={dispose(){d.dispose(),g.dispose(),clearTimeout(p)}},c()},m=s=>{w.setModelMarkers(s,this._selector,[]);let c=s.uri.toString();this._listener[c]&&(this._listener[c].dispose(),delete this._listener[c])};this._disposables.push(w.onDidCreateModel(s=>l(s))),this._disposables.push(w.onWillDisposeModel(m)),this._disposables.push(w.onDidChangeModelLanguage(s=>{m(s.model),l(s.model)})),this._disposables.push({dispose(){for(let s of w.getModels())m(s)}});let n=()=>{for(let s of w.getModels())m(s),l(s)};this._disposables.push(this._defaults.onDidChange(n)),this._disposables.push(this._defaults.onDidExtraLibsChange(n)),w.getModels().forEach(s=>l(s))}dispose(){this._disposables.forEach(t=>t&&t.dispose()),this._disposables=[]}_doValidate(t){return h(this,null,function*(){let e=yield this._worker(t.uri);if(t.isDisposed())return;let a=[],{noSyntaxValidation:o,noSemanticValidation:l,noSuggestionDiagnostics:m}=this._defaults.getDiagnosticsOptions();o||a.push(e.getSyntacticDiagnostics(t.uri.toString())),l||a.push(e.getSemanticDiagnostics(t.uri.toString())),m||a.push(e.getSuggestionDiagnostics(t.uri.toString()));let n=yield Promise.all(a);if(!n||t.isDisposed())return;let s=n.reduce((p,d)=>d.concat(p),[]).filter(p=>(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(p.code)===-1),c=s.map(p=>p.relatedInformation||[]).reduce((p,d)=>d.concat(p),[]).map(p=>p.file?D.parse(p.file.fileName):null);yield this._libFiles.fetchLibFilesIfNecessary(c),!t.isDisposed()&&w.setModelMarkers(t,this._selector,s.map(p=>this._convertDiagnostics(t,p)))})}_convertDiagnostics(t,e){let a=e.start||0,o=e.length||1,{lineNumber:l,column:m}=t.getPositionAt(a),{lineNumber:n,column:s}=t.getPositionAt(a+o),c=[];return e.reportsUnnecessary&&c.push($.Unnecessary),e.reportsDeprecated&&c.push($.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(e.category),startLineNumber:l,startColumn:m,endLineNumber:n,endColumn:s,message:L(e.messageText,`
`),code:e.code.toString(),tags:c,relatedInformation:this._convertRelatedInformation(t,e.relatedInformation)}}_convertRelatedInformation(t,e){if(!e)return[];let a=[];return e.forEach(o=>{let l=t;if(o.file&&(l=this._libFiles.getOrCreateModel(o.file.fileName)),!l)return;let m=o.start||0,n=o.length||1,{lineNumber:s,column:c}=l.getPositionAt(m),{lineNumber:p,column:d}=l.getPositionAt(m+n);a.push({resource:l.uri,startLineNumber:s,startColumn:c,endLineNumber:p,endColumn:d,message:L(o.messageText,`
`)})}),a}_tsDiagnosticCategoryToMarkerSeverity(t){switch(t){case 1:return v.Error;case 3:return v.Info;case 0:return v.Warning;case 2:return v.Hint}return v.Info}},I=class i extends _{get triggerCharacters(){return["."]}provideCompletionItems(t,e,a,o){return h(this,null,function*(){let l=t.getWordUntilPosition(e),m=new U(e.lineNumber,l.startColumn,e.lineNumber,l.endColumn),n=t.uri,s=t.getOffsetAt(e),c=yield this._worker(n);if(t.isDisposed())return;let p=yield c.getCompletionsAtPosition(n.toString(),s);return!p||t.isDisposed()?void 0:{suggestions:p.entries.map(g=>{let b=m;if(g.replacementSpan){let C=t.getPositionAt(g.replacementSpan.start),F=t.getPositionAt(g.replacementSpan.start+g.replacementSpan.length);b=new U(C.lineNumber,C.column,F.lineNumber,F.column)}let x=[];return g.kindModifiers!==void 0&&g.kindModifiers.indexOf("deprecated")!==-1&&x.push(u.CompletionItemTag.Deprecated),{uri:n,position:e,offset:s,range:b,label:g.name,insertText:g.name,sortText:g.sortText,kind:i.convertKind(g.kind),tags:x}})}})}resolveCompletionItem(t,e){return h(this,null,function*(){let a=t,o=a.uri,l=a.position,m=a.offset,s=yield(yield this._worker(o)).getCompletionEntryDetails(o.toString(),m,a.label);return s?{uri:o,position:l,label:s.name,kind:i.convertKind(s.kind),detail:k(s.displayParts),documentation:{value:i.createDocumentationString(s)}}:a})}static convertKind(t){switch(t){case f.primitiveType:case f.keyword:return u.CompletionItemKind.Keyword;case f.variable:case f.localVariable:return u.CompletionItemKind.Variable;case f.memberVariable:case f.memberGetAccessor:case f.memberSetAccessor:return u.CompletionItemKind.Field;case f.function:case f.memberFunction:case f.constructSignature:case f.callSignature:case f.indexSignature:return u.CompletionItemKind.Function;case f.enum:return u.CompletionItemKind.Enum;case f.module:return u.CompletionItemKind.Module;case f.class:return u.CompletionItemKind.Class;case f.interface:return u.CompletionItemKind.Interface;case f.warning:return u.CompletionItemKind.File}return u.CompletionItemKind.Property}static createDocumentationString(t){let e=k(t.documentation);if(t.tags)for(let a of t.tags)e+=`

${Y(a)}`;return e}};function Y(i){let t=`*@${i.name}*`;if(i.name==="param"&&i.text){let[e,...a]=i.text;t+=`\`${e.text}\``,a.length>0&&(t+=` \u2014 ${a.map(o=>o.text).join(" ")}`)}else Array.isArray(i.text)?t+=` \u2014 ${i.text.map(e=>e.text).join(" ")}`:i.text&&(t+=` \u2014 ${i.text}`);return t}var O=class i extends _{constructor(){super(...arguments),this.signatureHelpTriggerCharacters=["(",","]}static _toSignatureHelpTriggerReason(t){switch(t.triggerKind){case u.SignatureHelpTriggerKind.TriggerCharacter:return t.triggerCharacter?t.isRetrigger?{kind:"retrigger",triggerCharacter:t.triggerCharacter}:{kind:"characterTyped",triggerCharacter:t.triggerCharacter}:{kind:"invoked"};case u.SignatureHelpTriggerKind.ContentChange:return t.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case u.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}provideSignatureHelp(t,e,a,o){return h(this,null,function*(){let l=t.uri,m=t.getOffsetAt(e),n=yield this._worker(l);if(t.isDisposed())return;let s=yield n.getSignatureHelpItems(l.toString(),m,{triggerReason:i._toSignatureHelpTriggerReason(o)});if(!s||t.isDisposed())return;let c={activeSignature:s.selectedItemIndex,activeParameter:s.argumentIndex,signatures:[]};return s.items.forEach(p=>{let d={label:"",parameters:[]};d.documentation={value:k(p.documentation)},d.label+=k(p.prefixDisplayParts),p.parameters.forEach((g,b,x)=>{let C=k(g.displayParts),F={label:C,documentation:{value:k(g.documentation)}};d.label+=C,d.parameters.push(F),b<x.length-1&&(d.label+=k(p.separatorDisplayParts))}),d.label+=k(p.suffixDisplayParts),c.signatures.push(d)}),{value:c,dispose(){}}})}},N=class extends _{provideHover(t,e,a){return h(this,null,function*(){let o=t.uri,l=t.getOffsetAt(e),m=yield this._worker(o);if(t.isDisposed())return;let n=yield m.getQuickInfoAtPosition(o.toString(),l);if(!n||t.isDisposed())return;let s=k(n.documentation),c=n.tags?n.tags.map(d=>Y(d)).join(`  

`):"",p=k(n.displayParts);return{range:this._textSpanToRange(t,n.textSpan),contents:[{value:"```typescript\n"+p+"\n```\n"},{value:s+(c?`

`+c:"")}]}})}},K=class extends _{provideDocumentHighlights(t,e,a){return h(this,null,function*(){let o=t.uri,l=t.getOffsetAt(e),m=yield this._worker(o);if(t.isDisposed())return;let n=yield m.getDocumentHighlights(o.toString(),l,[o.toString()]);if(!(!n||t.isDisposed()))return n.flatMap(s=>s.highlightSpans.map(c=>({range:this._textSpanToRange(t,c.textSpan),kind:c.kind==="writtenReference"?u.DocumentHighlightKind.Write:u.DocumentHighlightKind.Text})))})}},M=class extends _{constructor(t,e){super(e),this._libFiles=t}provideDefinition(t,e,a){return h(this,null,function*(){let o=t.uri,l=t.getOffsetAt(e),m=yield this._worker(o);if(t.isDisposed())return;let n=yield m.getDefinitionAtPosition(o.toString(),l);if(!n||t.isDisposed()||(yield this._libFiles.fetchLibFilesIfNecessary(n.map(c=>D.parse(c.fileName))),t.isDisposed()))return;let s=[];for(let c of n){let p=this._libFiles.getOrCreateModel(c.fileName);p&&s.push({uri:p.uri,range:this._textSpanToRange(p,c.textSpan)})}return s})}},R=class extends _{constructor(t,e){super(e),this._libFiles=t}provideReferences(t,e,a,o){return h(this,null,function*(){let l=t.uri,m=t.getOffsetAt(e),n=yield this._worker(l);if(t.isDisposed())return;let s=yield n.getReferencesAtPosition(l.toString(),m);if(!s||t.isDisposed()||(yield this._libFiles.fetchLibFilesIfNecessary(s.map(p=>D.parse(p.fileName))),t.isDisposed()))return;let c=[];for(let p of s){let d=this._libFiles.getOrCreateModel(p.fileName);d&&c.push({uri:d.uri,range:this._textSpanToRange(d,p.textSpan)})}return c})}},E=class extends _{provideDocumentSymbols(t,e){return h(this,null,function*(){let a=t.uri,o=yield this._worker(a);if(t.isDisposed())return;let l=yield o.getNavigationTree(a.toString());if(!l||t.isDisposed())return;let m=(s,c)=>({name:s.text,detail:"",kind:y[s.kind]||u.SymbolKind.Variable,range:this._textSpanToRange(t,s.spans[0]),selectionRange:this._textSpanToRange(t,s.spans[0]),tags:[],children:s.childItems?.map(d=>m(d,s.text)),containerName:c});return l.childItems?l.childItems.map(s=>m(s)):[]})}},f=(()=>{class i{}return i.unknown="",i.keyword="keyword",i.script="script",i.module="module",i.class="class",i.interface="interface",i.type="type",i.enum="enum",i.variable="var",i.localVariable="local var",i.function="function",i.localFunction="local function",i.memberFunction="method",i.memberGetAccessor="getter",i.memberSetAccessor="setter",i.memberVariable="property",i.constructorImplementation="constructor",i.callSignature="call",i.indexSignature="index",i.constructSignature="construct",i.parameter="parameter",i.typeParameter="type parameter",i.primitiveType="primitive type",i.label="label",i.alias="alias",i.const="const",i.let="let",i.warning="warning",i})(),y=Object.create(null);y[f.module]=u.SymbolKind.Module;y[f.class]=u.SymbolKind.Class;y[f.enum]=u.SymbolKind.Enum;y[f.interface]=u.SymbolKind.Interface;y[f.memberFunction]=u.SymbolKind.Method;y[f.memberVariable]=u.SymbolKind.Property;y[f.memberGetAccessor]=u.SymbolKind.Property;y[f.memberSetAccessor]=u.SymbolKind.Property;y[f.variable]=u.SymbolKind.Variable;y[f.const]=u.SymbolKind.Variable;y[f.localVariable]=u.SymbolKind.Variable;y[f.variable]=u.SymbolKind.Variable;y[f.function]=u.SymbolKind.Function;y[f.localFunction]=u.SymbolKind.Function;var S=class extends _{static _convertOptions(t){return{ConvertTabsToSpaces:t.insertSpaces,TabSize:t.tabSize,IndentSize:t.tabSize,IndentStyle:2,NewLineCharacter:`
`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}_convertTextChanges(t,e){return{text:e.newText,range:this._textSpanToRange(t,e.span)}}},H=class extends S{constructor(){super(...arguments),this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(t,e,a,o){return h(this,null,function*(){let l=t.uri,m=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),n=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),s=yield this._worker(l);if(t.isDisposed())return;let c=yield s.getFormattingEditsForRange(l.toString(),m,n,S._convertOptions(a));if(!(!c||t.isDisposed()))return c.map(p=>this._convertTextChanges(t,p))})}},V=class extends S{get autoFormatTriggerCharacters(){return[";","}",`
`]}provideOnTypeFormattingEdits(t,e,a,o,l){return h(this,null,function*(){let m=t.uri,n=t.getOffsetAt(e),s=yield this._worker(m);if(t.isDisposed())return;let c=yield s.getFormattingEditsAfterKeystroke(m.toString(),n,a,S._convertOptions(o));if(!(!c||t.isDisposed()))return c.map(p=>this._convertTextChanges(t,p))})}},W=class extends S{provideCodeActions(t,e,a,o){return h(this,null,function*(){let l=t.uri,m=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),n=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),s=S._convertOptions(t.getOptions()),c=a.markers.filter(b=>b.code).map(b=>b.code).map(Number),p=yield this._worker(l);if(t.isDisposed())return;let d=yield p.getCodeFixesAtPosition(l.toString(),m,n,c,s);return!d||t.isDisposed()?{actions:[],dispose:()=>{}}:{actions:d.filter(b=>b.changes.filter(x=>x.isNewFile).length===0).map(b=>this._tsCodeFixActionToMonacoCodeAction(t,a,b)),dispose:()=>{}}})}_tsCodeFixActionToMonacoCodeAction(t,e,a){let o=[];for(let m of a.changes)for(let n of m.textChanges)o.push({resource:t.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(t,n.span),text:n.newText}});return{title:a.description,edit:{edits:o},diagnostics:e.markers,kind:"quickfix"}}},j=class extends _{constructor(t,e){super(e),this._libFiles=t}provideRenameEdits(t,e,a,o){return h(this,null,function*(){let l=t.uri,m=l.toString(),n=t.getOffsetAt(e),s=yield this._worker(l);if(t.isDisposed())return;let c=yield s.getRenameInfo(m,n,{allowRenameOfImportPath:!1});if(c.canRename===!1)return{edits:[],rejectReason:c.localizedErrorMessage};if(c.fileToRename!==void 0)throw new Error("Renaming files is not supported.");let p=yield s.findRenameLocations(m,n,!1,!1,!1);if(!p||t.isDisposed())return;let d=[];for(let g of p){let b=this._libFiles.getOrCreateModel(g.fileName);if(b)d.push({resource:b.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(b,g.textSpan),text:a}});else throw new Error(`Unknown file ${g.fileName}.`)}return{edits:d}})}},B=class extends _{provideInlayHints(t,e,a){return h(this,null,function*(){let o=t.uri,l=o.toString(),m=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),n=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),s=yield this._worker(o);return t.isDisposed()?null:{hints:(yield s.provideInlayHints(l,m,n)).map(d=>q(J({},d),{label:d.text,position:t.getPositionAt(d.position),kind:this._convertHintKind(d.kind)})),dispose:()=>{}}})}_convertHintKind(t){switch(t){case"Parameter":return u.InlayHintKind.Parameter;case"Type":return u.InlayHintKind.Type;default:return u.InlayHintKind.Type}}};var z,G;function fs(i){G=Z(i,"typescript")}function gs(i){z=Z(i,"javascript")}function bs(){return new Promise((i,t)=>{if(!z)return t("JavaScript not registered!");i(z)})}function hs(){return new Promise((i,t)=>{if(!G)return t("TypeScript not registered!");i(G)})}function Z(i,t){let e=[],a=new T(t,i),o=(...n)=>a.getLanguageServiceWorker(...n),l=new A(o);function m(){let{modeConfiguration:n}=i;tt(e),n.completionItems&&e.push(u.registerCompletionItemProvider(t,new I(o))),n.signatureHelp&&e.push(u.registerSignatureHelpProvider(t,new O(o))),n.hovers&&e.push(u.registerHoverProvider(t,new N(o))),n.documentHighlights&&e.push(u.registerDocumentHighlightProvider(t,new K(o))),n.definitions&&e.push(u.registerDefinitionProvider(t,new M(l,o))),n.references&&e.push(u.registerReferenceProvider(t,new R(l,o))),n.documentSymbols&&e.push(u.registerDocumentSymbolProvider(t,new E(o))),n.rename&&e.push(u.registerRenameProvider(t,new j(l,o))),n.documentRangeFormattingEdits&&e.push(u.registerDocumentRangeFormattingEditProvider(t,new H(o))),n.onTypeFormattingEdits&&e.push(u.registerOnTypeFormattingEditProvider(t,new V(o))),n.codeActions&&e.push(u.registerCodeActionProvider(t,new W(o))),n.inlayHints&&e.push(u.registerInlayHintsProvider(t,new B(o))),n.diagnostics&&e.push(new P(l,i,t,o))}return m(),o}function tt(i){for(;i.length;)i.pop().dispose()}export{_ as Adapter,W as CodeActionAdaptor,M as DefinitionAdapter,P as DiagnosticsAdapter,K as DocumentHighlightAdapter,H as FormatAdapter,S as FormatHelper,V as FormatOnTypeAdapter,B as InlayHintsAdapter,f as Kind,A as LibFiles,E as OutlineAdapter,N as QuickInfoAdapter,R as ReferenceAdapter,j as RenameAdapter,O as SignatureHelpAdapter,I as SuggestAdapter,T as WorkerManager,L as flattenDiagnosticMessageText,bs as getJavaScriptWorker,hs as getTypeScriptWorker,gs as setupJavaScript,fs as setupTypeScript};
