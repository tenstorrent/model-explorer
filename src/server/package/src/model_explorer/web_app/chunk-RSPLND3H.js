import{b as D,c as E,e as O,f as w,g as _}from"./chunk-B26MAMVN.js";var te;(function(t){function n(i){return typeof i=="string"}t.is=n})(te||(te={}));var W;(function(t){function n(i){return typeof i=="string"}t.is=n})(W||(W={}));var ne;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function n(i){return typeof i=="number"&&t.MIN_VALUE<=i&&i<=t.MAX_VALUE}t.is=n})(ne||(ne={}));var C;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function n(i){return typeof i=="number"&&t.MIN_VALUE<=i&&i<=t.MAX_VALUE}t.is=n})(C||(C={}));var x;(function(t){function n(r,e){return r===Number.MAX_VALUE&&(r=C.MAX_VALUE),e===Number.MAX_VALUE&&(e=C.MAX_VALUE),{line:r,character:e}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&u.uinteger(e.line)&&u.uinteger(e.character)}t.is=i})(x||(x={}));var p;(function(t){function n(r,e,o,a){if(u.uinteger(r)&&u.uinteger(e)&&u.uinteger(o)&&u.uinteger(a))return{start:x.create(r,e),end:x.create(o,a)};if(x.is(r)&&x.is(e))return{start:r,end:e};throw new Error(`Range#create called with invalid arguments[${r}, ${e}, ${o}, ${a}]`)}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&x.is(e.start)&&x.is(e.end)}t.is=i})(p||(p={}));var V;(function(t){function n(r,e){return{uri:r,range:e}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&p.is(e.range)&&(u.string(e.uri)||u.undefined(e.uri))}t.is=i})(V||(V={}));var re;(function(t){function n(r,e,o,a){return{targetUri:r,targetRange:e,targetSelectionRange:o,originSelectionRange:a}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&p.is(e.targetRange)&&u.string(e.targetUri)&&p.is(e.targetSelectionRange)&&(p.is(e.originSelectionRange)||u.undefined(e.originSelectionRange))}t.is=i})(re||(re={}));var H;(function(t){function n(r,e,o,a){return{red:r,green:e,blue:o,alpha:a}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&u.numberRange(e.red,0,1)&&u.numberRange(e.green,0,1)&&u.numberRange(e.blue,0,1)&&u.numberRange(e.alpha,0,1)}t.is=i})(H||(H={}));var ie;(function(t){function n(r,e){return{range:r,color:e}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&p.is(e.range)&&H.is(e.color)}t.is=i})(ie||(ie={}));var oe;(function(t){function n(r,e,o){return{label:r,textEdit:e,additionalTextEdits:o}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&u.string(e.label)&&(u.undefined(e.textEdit)||I.is(e))&&(u.undefined(e.additionalTextEdits)||u.typedArray(e.additionalTextEdits,I.is))}t.is=i})(oe||(oe={}));var j=function(t){return t.Comment="comment",t.Imports="imports",t.Region="region",t}(j||{}),ue;(function(t){function n(r,e,o,a,s,f){let l={startLine:r,endLine:e};return u.defined(o)&&(l.startCharacter=o),u.defined(a)&&(l.endCharacter=a),u.defined(s)&&(l.kind=s),u.defined(f)&&(l.collapsedText=f),l}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&u.uinteger(e.startLine)&&u.uinteger(e.startLine)&&(u.undefined(e.startCharacter)||u.uinteger(e.startCharacter))&&(u.undefined(e.endCharacter)||u.uinteger(e.endCharacter))&&(u.undefined(e.kind)||u.string(e.kind))}t.is=i})(ue||(ue={}));var S;(function(t){function n(r,e){return{location:r,message:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&V.is(e.location)&&u.string(e.message)}t.is=i})(S||(S={}));var M=function(t){return t.Error=1,t.Warning=2,t.Information=3,t.Hint=4,t}(M||{});var ae;(function(t){function n(i){let r=i;return u.objectLiteral(r)&&u.string(r.href)}t.is=n})(ae||(ae={}));var P;(function(t){function n(r,e,o,a,s,f){let l={range:r,message:e};return u.defined(o)&&(l.severity=o),u.defined(a)&&(l.code=a),u.defined(s)&&(l.source=s),u.defined(f)&&(l.relatedInformation=f),l}t.create=n;function i(r){var e;let o=r;return u.defined(o)&&p.is(o.range)&&u.string(o.message)&&(u.number(o.severity)||u.undefined(o.severity))&&(u.integer(o.code)||u.string(o.code)||u.undefined(o.code))&&(u.undefined(o.codeDescription)||u.string((e=o.codeDescription)===null||e===void 0?void 0:e.href))&&(u.string(o.source)||u.undefined(o.source))&&(u.undefined(o.relatedInformation)||u.typedArray(o.relatedInformation,S.is))}t.is=i})(P||(P={}));var L;(function(t){function n(r,e,...o){let a={title:r,command:e};return u.defined(o)&&o.length>0&&(a.arguments=o),a}t.create=n;function i(r){let e=r;return u.defined(e)&&u.string(e.title)&&u.string(e.command)}t.is=i})(L||(L={}));var I;(function(t){function n(o,a){return{range:o,newText:a}}t.replace=n;function i(o,a){return{range:{start:o,end:o},newText:a}}t.insert=i;function r(o){return{range:o,newText:""}}t.del=r;function e(o){let a=o;return u.objectLiteral(a)&&u.string(a.newText)&&p.is(a.range)}t.is=e})(I||(I={}));var X;(function(t){function n(r,e,o){let a={label:r};return e!==void 0&&(a.needsConfirmation=e),o!==void 0&&(a.description=o),a}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&u.string(e.label)&&(u.boolean(e.needsConfirmation)||e.needsConfirmation===void 0)&&(u.string(e.description)||e.description===void 0)}t.is=i})(X||(X={}));var R;(function(t){function n(i){let r=i;return u.string(r)}t.is=n})(R||(R={}));var se;(function(t){function n(o,a,s){return{range:o,newText:a,annotationId:s}}t.replace=n;function i(o,a,s){return{range:{start:o,end:o},newText:a,annotationId:s}}t.insert=i;function r(o,a){return{range:o,newText:"",annotationId:a}}t.del=r;function e(o){let a=o;return I.is(a)&&(X.is(a.annotationId)||R.is(a.annotationId))}t.is=e})(se||(se={}));var $;(function(t){function n(r,e){return{textDocument:r,edits:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&G.is(e.textDocument)&&Array.isArray(e.edits)}t.is=i})($||($={}));var z;(function(t){function n(r,e,o){let a={kind:"create",uri:r};return e!==void 0&&(e.overwrite!==void 0||e.ignoreIfExists!==void 0)&&(a.options=e),o!==void 0&&(a.annotationId=o),a}t.create=n;function i(r){let e=r;return e&&e.kind==="create"&&u.string(e.uri)&&(e.options===void 0||(e.options.overwrite===void 0||u.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||u.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||R.is(e.annotationId))}t.is=i})(z||(z={}));var B;(function(t){function n(r,e,o,a){let s={kind:"rename",oldUri:r,newUri:e};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(s.options=o),a!==void 0&&(s.annotationId=a),s}t.create=n;function i(r){let e=r;return e&&e.kind==="rename"&&u.string(e.oldUri)&&u.string(e.newUri)&&(e.options===void 0||(e.options.overwrite===void 0||u.boolean(e.options.overwrite))&&(e.options.ignoreIfExists===void 0||u.boolean(e.options.ignoreIfExists)))&&(e.annotationId===void 0||R.is(e.annotationId))}t.is=i})(B||(B={}));var q;(function(t){function n(r,e,o){let a={kind:"delete",uri:r};return e!==void 0&&(e.recursive!==void 0||e.ignoreIfNotExists!==void 0)&&(a.options=e),o!==void 0&&(a.annotationId=o),a}t.create=n;function i(r){let e=r;return e&&e.kind==="delete"&&u.string(e.uri)&&(e.options===void 0||(e.options.recursive===void 0||u.boolean(e.options.recursive))&&(e.options.ignoreIfNotExists===void 0||u.boolean(e.options.ignoreIfNotExists)))&&(e.annotationId===void 0||R.is(e.annotationId))}t.is=i})(q||(q={}));var Q;(function(t){function n(i){let r=i;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(e=>u.string(e.kind)?z.is(e)||B.is(e)||q.is(e):$.is(e)))}t.is=n})(Q||(Q={}));var ce;(function(t){function n(r){return{uri:r}}t.create=n;function i(r){let e=r;return u.defined(e)&&u.string(e.uri)}t.is=i})(ce||(ce={}));var de;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&u.string(e.uri)&&u.integer(e.version)}t.is=i})(de||(de={}));var G;(function(t){function n(r,e){return{uri:r,version:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&u.string(e.uri)&&(e.version===null||u.integer(e.version))}t.is=i})(G||(G={}));var fe;(function(t){function n(r,e,o,a){return{uri:r,languageId:e,version:o,text:a}}t.create=n;function i(r){let e=r;return u.defined(e)&&u.string(e.uri)&&u.string(e.languageId)&&u.integer(e.version)&&u.string(e.text)}t.is=i})(fe||(fe={}));var J;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function n(i){let r=i;return r===t.PlainText||r===t.Markdown}t.is=n})(J||(J={}));var A;(function(t){function n(i){let r=i;return u.objectLiteral(i)&&J.is(r.kind)&&u.string(r.value)}t.is=n})(A||(A={}));var h=function(t){return t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25,t}(h||{}),ee=function(t){return t.PlainText=1,t.Snippet=2,t}(ee||{});var le;(function(t){function n(r,e,o){return{newText:r,insert:e,replace:o}}t.create=n;function i(r){let e=r;return e&&u.string(e.newText)&&p.is(e.insert)&&p.is(e.replace)}t.is=i})(le||(le={}));var ge;(function(t){function n(i){let r=i;return r&&(u.string(r.detail)||r.detail===void 0)&&(u.string(r.description)||r.description===void 0)}t.is=n})(ge||(ge={}));var pe;(function(t){function n(i){return{label:i}}t.create=n})(pe||(pe={}));var he;(function(t){function n(i,r){return{items:i||[],isIncomplete:!!r}}t.create=n})(he||(he={}));var y;(function(t){function n(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=n;function i(r){let e=r;return u.string(e)||u.objectLiteral(e)&&u.string(e.language)&&u.string(e.value)}t.is=i})(y||(y={}));var me;(function(t){function n(i){let r=i;return!!r&&u.objectLiteral(r)&&(A.is(r.contents)||y.is(r.contents)||u.typedArray(r.contents,y.is))&&(i.range===void 0||p.is(i.range))}t.is=n})(me||(me={}));var ve;(function(t){function n(i,r){return r?{label:i,documentation:r}:{label:i}}t.create=n})(ve||(ve={}));var be;(function(t){function n(i,r,...e){let o={label:i};return u.defined(r)&&(o.documentation=r),u.defined(e)?o.parameters=e:o.parameters=[],o}t.create=n})(be||(be={}));var N=function(t){return t.Text=1,t.Read=2,t.Write=3,t}(N||{}),_e;(function(t){function n(i,r){let e={range:i};return u.number(r)&&(e.kind=r),e}t.create=n})(_e||(_e={}));var m=function(t){return t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26,t}(m||{});var xe;(function(t){function n(i,r,e,o,a){let s={name:i,kind:r,location:{uri:o,range:e}};return a&&(s.containerName=a),s}t.create=n})(xe||(xe={}));var we;(function(t){function n(i,r,e,o){return o!==void 0?{name:i,kind:r,location:{uri:e,range:o}}:{name:i,kind:r,location:{uri:e}}}t.create=n})(we||(we={}));var ke;(function(t){function n(r,e,o,a,s,f){let l={name:r,detail:e,kind:o,range:a,selectionRange:s};return f!==void 0&&(l.children=f),l}t.create=n;function i(r){let e=r;return e&&u.string(e.name)&&u.number(e.kind)&&p.is(e.range)&&p.is(e.selectionRange)&&(e.detail===void 0||u.string(e.detail))&&(e.deprecated===void 0||u.boolean(e.deprecated))&&(e.children===void 0||Array.isArray(e.children))&&(e.tags===void 0||Array.isArray(e.tags))}t.is=i})(ke||(ke={}));var Y=function(t){return t.Invoked=1,t.Automatic=2,t}(Y||{}),Ee;(function(t){function n(r,e,o){let a={diagnostics:r};return e!=null&&(a.only=e),o!=null&&(a.triggerKind=o),a}t.create=n;function i(r){let e=r;return u.defined(e)&&u.typedArray(e.diagnostics,P.is)&&(e.only===void 0||u.typedArray(e.only,u.string))&&(e.triggerKind===void 0||e.triggerKind===Y.Invoked||e.triggerKind===Y.Automatic)}t.is=i})(Ee||(Ee={}));var Le;(function(t){function n(r,e,o){let a={title:r},s=!0;return typeof e=="string"?(s=!1,a.kind=e):L.is(e)?a.command=e:a.edit=e,s&&o!==void 0&&(a.kind=o),a}t.create=n;function i(r){let e=r;return e&&u.string(e.title)&&(e.diagnostics===void 0||u.typedArray(e.diagnostics,P.is))&&(e.kind===void 0||u.string(e.kind))&&(e.edit!==void 0||e.command!==void 0)&&(e.command===void 0||L.is(e.command))&&(e.isPreferred===void 0||u.boolean(e.isPreferred))&&(e.edit===void 0||Q.is(e.edit))}t.is=i})(Le||(Le={}));var Ie;(function(t){function n(r,e){let o={range:r};return u.defined(e)&&(o.data=e),o}t.create=n;function i(r){let e=r;return u.defined(e)&&p.is(e.range)&&(u.undefined(e.command)||L.is(e.command))}t.is=i})(Ie||(Ie={}));var Re;(function(t){function n(r,e){return{tabSize:r,insertSpaces:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&u.uinteger(e.tabSize)&&u.boolean(e.insertSpaces)}t.is=i})(Re||(Re={}));var Me;(function(t){function n(r,e,o){return{range:r,target:e,data:o}}t.create=n;function i(r){let e=r;return u.defined(e)&&p.is(e.range)&&(u.undefined(e.target)||u.string(e.target))}t.is=i})(Me||(Me={}));var Ae;(function(t){function n(r,e){return{range:r,parent:e}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&p.is(e.range)&&(e.parent===void 0||t.is(e.parent))}t.is=i})(Ae||(Ae={}));var je;(function(t){function n(i){let r=i;return u.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=n})(je||(je={}));var Ne;(function(t){function n(r,e){return{range:r,text:e}}t.create=n;function i(r){let e=r;return e!=null&&p.is(e.range)&&u.string(e.text)}t.is=i})(Ne||(Ne={}));var Fe;(function(t){function n(r,e,o){return{range:r,variableName:e,caseSensitiveLookup:o}}t.create=n;function i(r){let e=r;return e!=null&&p.is(e.range)&&u.boolean(e.caseSensitiveLookup)&&(u.string(e.variableName)||e.variableName===void 0)}t.is=i})(Fe||(Fe={}));var Ce;(function(t){function n(r,e){return{range:r,expression:e}}t.create=n;function i(r){let e=r;return e!=null&&p.is(e.range)&&(u.string(e.expression)||e.expression===void 0)}t.is=i})(Ce||(Ce={}));var Ve;(function(t){function n(r,e){return{frameId:r,stoppedLocation:e}}t.create=n;function i(r){let e=r;return u.defined(e)&&p.is(r.stoppedLocation)}t.is=i})(Ve||(Ve={}));var Z;(function(t){t.Type=1,t.Parameter=2;function n(i){return i===1||i===2}t.is=n})(Z||(Z={}));var T;(function(t){function n(r){return{value:r}}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&(e.tooltip===void 0||u.string(e.tooltip)||A.is(e.tooltip))&&(e.location===void 0||V.is(e.location))&&(e.command===void 0||L.is(e.command))}t.is=i})(T||(T={}));var Pe;(function(t){function n(r,e,o){let a={position:r,label:e};return o!==void 0&&(a.kind=o),a}t.create=n;function i(r){let e=r;return u.objectLiteral(e)&&x.is(e.position)&&(u.string(e.label)||u.typedArray(e.label,T.is))&&(e.kind===void 0||Z.is(e.kind))&&e.textEdits===void 0||u.typedArray(e.textEdits,I.is)&&(e.tooltip===void 0||u.string(e.tooltip)||A.is(e.tooltip))&&(e.paddingLeft===void 0||u.boolean(e.paddingLeft))&&(e.paddingRight===void 0||u.boolean(e.paddingRight))}t.is=i})(Pe||(Pe={}));var ye;(function(t){function n(i){return{kind:"snippet",value:i}}t.createSnippet=n})(ye||(ye={}));var Ue;(function(t){function n(i,r,e,o){return{insertText:i,filterText:r,range:e,command:o}}t.create=n})(Ue||(Ue={}));var De;(function(t){function n(i){return{items:i}}t.create=n})(De||(De={}));var Oe;(function(t){function n(i,r){return{range:i,text:r}}t.create=n})(Oe||(Oe={}));var We;(function(t){function n(i,r){return{triggerKind:i,selectedCompletionInfo:r}}t.create=n})(We||(We={}));var He;(function(t){function n(i){let r=i;return u.objectLiteral(r)&&W.is(r.uri)&&u.string(r.name)}t.is=n})(He||(He={}));var Se;(function(t){function n(o,a,s,f){return new K(o,a,s,f)}t.create=n;function i(o){let a=o;return!!(u.defined(a)&&u.string(a.uri)&&(u.undefined(a.languageId)||u.string(a.languageId))&&u.uinteger(a.lineCount)&&u.func(a.getText)&&u.func(a.positionAt)&&u.func(a.offsetAt))}t.is=i;function r(o,a){let s=o.getText(),f=e(a,(d,g)=>{let b=d.range.start.line-g.range.start.line;return b===0?d.range.start.character-g.range.start.character:b}),l=s.length;for(let d=f.length-1;d>=0;d--){let g=f[d],b=o.offsetAt(g.range.start),c=o.offsetAt(g.range.end);if(c<=l)s=s.substring(0,b)+g.newText+s.substring(c,s.length);else throw new Error("Overlapping edit");l=b}return s}t.applyEdits=r;function e(o,a){if(o.length<=1)return o;let s=o.length/2|0,f=o.slice(0,s),l=o.slice(s);e(f,a),e(l,a);let d=0,g=0,b=0;for(;d<f.length&&g<l.length;)a(f[d],l[g])<=0?o[b++]=f[d++]:o[b++]=l[g++];for(;d<f.length;)o[b++]=f[d++];for(;g<l.length;)o[b++]=l[g++];return o}})(Se||(Se={}));var K=class{constructor(n,i,r,e){this._uri=n,this._languageId=i,this._version=r,this._content=e,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(n){if(n){let i=this.offsetAt(n.start),r=this.offsetAt(n.end);return this._content.substring(i,r)}return this._content}update(n,i){this._content=n.text,this._version=i,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let n=[],i=this._content,r=!0;for(let e=0;e<i.length;e++){r&&(n.push(e),r=!1);let o=i.charAt(e);r=o==="\r"||o===`
`,o==="\r"&&e+1<i.length&&i.charAt(e+1)===`
`&&e++}r&&i.length>0&&n.push(i.length),this._lineOffsets=n}return this._lineOffsets}positionAt(n){n=Math.max(Math.min(n,this._content.length),0);let i=this.getLineOffsets(),r=0,e=i.length;if(e===0)return x.create(0,n);for(;r<e;){let a=Math.floor((r+e)/2);i[a]>n?e=a:r=a+1}let o=r-1;return x.create(o,n-i[o])}offsetAt(n){let i=this.getLineOffsets();if(n.line>=i.length)return this._content.length;if(n.line<0)return 0;let r=i[n.line],e=n.line+1<i.length?i[n.line+1]:this._content.length;return Math.max(Math.min(r+n.character,e),r)}get lineCount(){return this.getLineOffsets().length}},u;(function(t){let n=Object.prototype.toString;function i(c){return typeof c<"u"}t.defined=i;function r(c){return typeof c>"u"}t.undefined=r;function e(c){return c===!0||c===!1}t.boolean=e;function o(c){return n.call(c)==="[object String]"}t.string=o;function a(c){return n.call(c)==="[object Number]"}t.number=a;function s(c,U,st){return n.call(c)==="[object Number]"&&U<=c&&c<=st}t.numberRange=s;function f(c){return n.call(c)==="[object Number]"&&-2147483648<=c&&c<=2147483647}t.integer=f;function l(c){return n.call(c)==="[object Number]"&&0<=c&&c<=2147483647}t.uinteger=l;function d(c){return n.call(c)==="[object Function]"}t.func=d;function g(c){return c!==null&&typeof c=="object"}t.objectLiteral=g;function b(c,U){return Array.isArray(c)&&c.every(U)}t.typedArray=b})(u||(u={}));var Xe=class{constructor(n,i,r){this._languageId=n,this._worker=i,this._disposables=[],this._listener=Object.create(null);let e=a=>{let s=a.getLanguageId();if(s!==this._languageId)return;let f;this._listener[a.uri.toString()]=a.onDidChangeContent(()=>{window.clearTimeout(f),f=window.setTimeout(()=>this._doValidate(a.uri,s),500)}),this._doValidate(a.uri,s)},o=a=>{w.setModelMarkers(a,this._languageId,[]);let s=a.uri.toString(),f=this._listener[s];f&&(f.dispose(),delete this._listener[s])};this._disposables.push(w.onDidCreateModel(e)),this._disposables.push(w.onWillDisposeModel(o)),this._disposables.push(w.onDidChangeModelLanguage(a=>{o(a.model),e(a.model)})),this._disposables.push(r(a=>{w.getModels().forEach(s=>{s.getLanguageId()===this._languageId&&(o(s),e(s))})})),this._disposables.push({dispose:()=>{w.getModels().forEach(o);for(let a in this._listener)this._listener[a].dispose()}}),w.getModels().forEach(e)}dispose(){this._disposables.forEach(n=>n&&n.dispose()),this._disposables.length=0}_doValidate(n,i){this._worker(n).then(r=>r.doValidation(n.toString())).then(r=>{let e=r.map(a=>dt(n,a)),o=w.getModel(n);o&&o.getLanguageId()===i&&w.setModelMarkers(o,i,e)}).then(void 0,r=>{console.error(r)})}};function ct(t){switch(t){case M.Error:return E.Error;case M.Warning:return E.Warning;case M.Information:return E.Info;case M.Hint:return E.Hint;default:return E.Info}}function dt(t,n){let i=typeof n.code=="number"?String(n.code):n.code;return{severity:ct(n.severity),startLineNumber:n.range.start.line+1,startColumn:n.range.start.character+1,endLineNumber:n.range.end.line+1,endColumn:n.range.end.character+1,message:n.message,code:i,source:n.source}}var $e=class{constructor(n,i){this._worker=n,this._triggerCharacters=i}get triggerCharacters(){return this._triggerCharacters}provideCompletionItems(n,i,r,e){let o=n.uri;return this._worker(o).then(a=>a.doComplete(o.toString(),k(i))).then(a=>{if(!a)return;let s=n.getWordUntilPosition(i),f=new D(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn),l=a.items.map(d=>{let g={label:d.label,insertText:d.insertText||d.label,sortText:d.sortText,filterText:d.filterText,documentation:d.documentation,detail:d.detail,command:gt(d.command),range:f,kind:lt(d.kind)};return d.textEdit&&(ft(d.textEdit)?g.range={insert:v(d.textEdit.insert),replace:v(d.textEdit.replace)}:g.range=v(d.textEdit.range),g.insertText=d.textEdit.newText),d.additionalTextEdits&&(g.additionalTextEdits=d.additionalTextEdits.map(F)),d.insertTextFormat===ee.Snippet&&(g.insertTextRules=_.CompletionItemInsertTextRule.InsertAsSnippet),g});return{isIncomplete:a.isIncomplete,suggestions:l}})}};function k(t){if(t)return{character:t.column-1,line:t.lineNumber-1}}function rt(t){if(t)return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}}function v(t){if(t)return new D(t.start.line+1,t.start.character+1,t.end.line+1,t.end.character+1)}function ft(t){return typeof t.insert<"u"&&typeof t.replace<"u"}function lt(t){let n=_.CompletionItemKind;switch(t){case h.Text:return n.Text;case h.Method:return n.Method;case h.Function:return n.Function;case h.Constructor:return n.Constructor;case h.Field:return n.Field;case h.Variable:return n.Variable;case h.Class:return n.Class;case h.Interface:return n.Interface;case h.Module:return n.Module;case h.Property:return n.Property;case h.Unit:return n.Unit;case h.Value:return n.Value;case h.Enum:return n.Enum;case h.Keyword:return n.Keyword;case h.Snippet:return n.Snippet;case h.Color:return n.Color;case h.File:return n.File;case h.Reference:return n.Reference}return n.Property}function F(t){if(t)return{range:v(t.range),text:t.newText}}function gt(t){return t&&t.command==="editor.action.triggerSuggest"?{id:t.command,title:t.title,arguments:t.arguments}:void 0}var ze=class{constructor(n){this._worker=n}provideHover(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.doHover(e.toString(),k(i))).then(o=>{if(o)return{range:v(o.range),contents:ht(o.contents)}})}};function pt(t){return t&&typeof t=="object"&&typeof t.kind=="string"}function Be(t){return typeof t=="string"?{value:t}:pt(t)?t.kind==="plaintext"?{value:t.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:t.value}:{value:"```"+t.language+`
`+t.value+"\n```\n"}}function ht(t){if(t)return Array.isArray(t)?t.map(Be):[Be(t)]}var qe=class{constructor(n){this._worker=n}provideDocumentHighlights(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.findDocumentHighlights(e.toString(),k(i))).then(o=>{if(o)return o.map(a=>({range:v(a.range),kind:mt(a.kind)}))})}};function mt(t){switch(t){case N.Read:return _.DocumentHighlightKind.Read;case N.Write:return _.DocumentHighlightKind.Write;case N.Text:return _.DocumentHighlightKind.Text}return _.DocumentHighlightKind.Text}var Qe=class{constructor(n){this._worker=n}provideDefinition(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.findDefinition(e.toString(),k(i))).then(o=>{if(o)return[it(o)]})}};function it(t){return{uri:O.parse(t.uri),range:v(t.range)}}var Ge=class{constructor(n){this._worker=n}provideReferences(n,i,r,e){let o=n.uri;return this._worker(o).then(a=>a.findReferences(o.toString(),k(i))).then(a=>{if(a)return a.map(it)})}},Je=class{constructor(n){this._worker=n}provideRenameEdits(n,i,r,e){let o=n.uri;return this._worker(o).then(a=>a.doRename(o.toString(),k(i),r)).then(a=>vt(a))}};function vt(t){if(!t||!t.changes)return;let n=[];for(let i in t.changes){let r=O.parse(i);for(let e of t.changes[i])n.push({resource:r,versionId:void 0,textEdit:{range:v(e.range),text:e.newText}})}return{edits:n}}var Ye=class{constructor(n){this._worker=n}provideDocumentSymbols(n,i){let r=n.uri;return this._worker(r).then(e=>e.findDocumentSymbols(r.toString())).then(e=>{if(e)return e.map(o=>bt(o)?ot(o):{name:o.name,detail:"",containerName:o.containerName,kind:ut(o.kind),range:v(o.location.range),selectionRange:v(o.location.range),tags:[]})})}};function bt(t){return"children"in t}function ot(t){return{name:t.name,detail:t.detail??"",kind:ut(t.kind),range:v(t.range),selectionRange:v(t.selectionRange),tags:t.tags??[],children:(t.children??[]).map(n=>ot(n))}}function ut(t){let n=_.SymbolKind;switch(t){case m.File:return n.File;case m.Module:return n.Module;case m.Namespace:return n.Namespace;case m.Package:return n.Package;case m.Class:return n.Class;case m.Method:return n.Method;case m.Property:return n.Property;case m.Field:return n.Field;case m.Constructor:return n.Constructor;case m.Enum:return n.Enum;case m.Interface:return n.Interface;case m.Function:return n.Function;case m.Variable:return n.Variable;case m.Constant:return n.Constant;case m.String:return n.String;case m.Number:return n.Number;case m.Boolean:return n.Boolean;case m.Array:return n.Array}return n.Function}var Ze=class{constructor(n){this._worker=n}provideLinks(n,i){let r=n.uri;return this._worker(r).then(e=>e.findDocumentLinks(r.toString())).then(e=>{if(e)return{links:e.map(o=>({range:v(o.range),url:o.target}))}})}},Te=class{constructor(n){this._worker=n}provideDocumentFormattingEdits(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.format(e.toString(),null,at(i)).then(a=>{if(!(!a||a.length===0))return a.map(F)}))}},Ke=class{constructor(n){this._worker=n,this.canFormatMultipleRanges=!1}provideDocumentRangeFormattingEdits(n,i,r,e){let o=n.uri;return this._worker(o).then(a=>a.format(o.toString(),rt(i),at(r)).then(s=>{if(!(!s||s.length===0))return s.map(F)}))}};function at(t){return{tabSize:t.tabSize,insertSpaces:t.insertSpaces}}var et=class{constructor(n){this._worker=n}provideDocumentColors(n,i){let r=n.uri;return this._worker(r).then(e=>e.findDocumentColors(r.toString())).then(e=>{if(e)return e.map(o=>({color:o.color,range:v(o.range)}))})}provideColorPresentations(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.getColorPresentations(e.toString(),i.color,rt(i.range))).then(o=>{if(o)return o.map(a=>{let s={label:a.label};return a.textEdit&&(s.textEdit=F(a.textEdit)),a.additionalTextEdits&&(s.additionalTextEdits=a.additionalTextEdits.map(F)),s})})}},tt=class{constructor(n){this._worker=n}provideFoldingRanges(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.getFoldingRanges(e.toString(),i)).then(o=>{if(o)return o.map(a=>{let s={start:a.startLine+1,end:a.endLine+1};return typeof a.kind<"u"&&(s.kind=_t(a.kind)),s})})}};function _t(t){switch(t){case j.Comment:return _.FoldingRangeKind.Comment;case j.Imports:return _.FoldingRangeKind.Imports;case j.Region:return _.FoldingRangeKind.Region}}var nt=class{constructor(n){this._worker=n}provideSelectionRanges(n,i,r){let e=n.uri;return this._worker(e).then(o=>o.getSelectionRanges(e.toString(),i.map(k))).then(o=>{if(o)return o.map(a=>{let s=[];for(;a;)s.push({range:v(a.range)}),a=a.parent;return s})})}};export{Xe as a,$e as b,k as c,rt as d,v as e,F as f,ze as g,qe as h,Qe as i,Ge as j,Je as k,Ye as l,Ze as m,Te as n,Ke as o,et as p,tt as q,nt as r};
