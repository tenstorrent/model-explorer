import{a as y,b as R,c as x,d as C,e as ee,f as ne,g as V,h as te,i as ie,j as re,k as se,l as W,m as oe,n as F,o as M,p as P,q as z,r as q}from"./chunk-RSPLND3H.js";import{a as D}from"./chunk-W6OGDNWL.js";import{f as d,g as b}from"./chunk-B26MAMVN.js";import"./chunk-YF6DGJ2Q.js";var le=2*60*1e3,E=class{constructor(t){this._defaults=t,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>le&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=D({moduleId:"vs/language/json/jsonWorker",createWorker:()=>new Worker(new URL("json.worker.js",import.meta.url),{type:"module"}),label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId,enableSchemaRequest:this._defaults.diagnosticsOptions.enableSchemaRequest}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...t){let i;return this._getClient().then(e=>{i=e}).then(e=>{if(this._worker)return this._worker.withSyncedResources(t)}).then(e=>i)}};function v(n,t=!1){let i=n.length,e=0,o="",c=0,s=16,l=0,a=0,T=0,w=0,u=0;function O(r,p){let k=0,m=0;for(;k<r;){let f=n.charCodeAt(e);if(f>=48&&f<=57)m=m*16+f-48;else if(f>=65&&f<=70)m=m*16+f-65+10;else if(f>=97&&f<=102)m=m*16+f-97+10;else break;e++,k++}return k<r&&(m=-1),m}function U(r){e=r,o="",c=0,s=16,u=0}function I(){let r=e;if(n.charCodeAt(e)===48)e++;else for(e++;e<n.length&&_(n.charCodeAt(e));)e++;if(e<n.length&&n.charCodeAt(e)===46)if(e++,e<n.length&&_(n.charCodeAt(e)))for(e++;e<n.length&&_(n.charCodeAt(e));)e++;else return u=3,n.substring(r,e);let p=e;if(e<n.length&&(n.charCodeAt(e)===69||n.charCodeAt(e)===101))if(e++,(e<n.length&&n.charCodeAt(e)===43||n.charCodeAt(e)===45)&&e++,e<n.length&&_(n.charCodeAt(e))){for(e++;e<n.length&&_(n.charCodeAt(e));)e++;p=e}else u=3;return n.substring(r,p)}function X(){let r="",p=e;for(;;){if(e>=i){r+=n.substring(p,e),u=2;break}let k=n.charCodeAt(e);if(k===34){r+=n.substring(p,e),e++;break}if(k===92){if(r+=n.substring(p,e),e++,e>=i){u=2;break}switch(n.charCodeAt(e++)){case 34:r+='"';break;case 92:r+="\\";break;case 47:r+="/";break;case 98:r+="\b";break;case 102:r+="\f";break;case 110:r+=`
`;break;case 114:r+="\r";break;case 116:r+="	";break;case 117:let f=O(4);f>=0?r+=String.fromCharCode(f):u=4;break;default:u=5}p=e;continue}if(k>=0&&k<=31)if(A(k)){r+=n.substring(p,e),u=2;break}else u=6;e++}return r}function j(){if(o="",u=0,c=e,a=l,w=T,e>=i)return c=i,s=17;let r=n.charCodeAt(e);if(B(r)){do e++,o+=String.fromCharCode(r),r=n.charCodeAt(e);while(B(r));return s=15}if(A(r))return e++,o+=String.fromCharCode(r),r===13&&n.charCodeAt(e)===10&&(e++,o+=`
`),l++,T=e,s=14;switch(r){case 123:return e++,s=1;case 125:return e++,s=2;case 91:return e++,s=3;case 93:return e++,s=4;case 58:return e++,s=6;case 44:return e++,s=5;case 34:return e++,o=X(),s=10;case 47:let p=e-1;if(n.charCodeAt(e+1)===47){for(e+=2;e<i&&!A(n.charCodeAt(e));)e++;return o=n.substring(p,e),s=12}if(n.charCodeAt(e+1)===42){e+=2;let k=i-1,m=!1;for(;e<k;){let f=n.charCodeAt(e);if(f===42&&n.charCodeAt(e+1)===47){e+=2,m=!0;break}e++,A(f)&&(f===13&&n.charCodeAt(e)===10&&e++,l++,T=e)}return m||(e++,u=1),o=n.substring(p,e),s=13}return o+=String.fromCharCode(r),e++,s=16;case 45:if(o+=String.fromCharCode(r),e++,e===i||!_(n.charCodeAt(e)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=I(),s=11;default:for(;e<i&&Z(r);)e++,r=n.charCodeAt(e);if(c!==e){switch(o=n.substring(c,e),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(r),e++,s=16}}function Z(r){if(B(r)||A(r))return!1;switch(r){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function K(){let r;do r=j();while(r>=12&&r<=15);return r}return{setPosition:U,getPosition:()=>e,scan:t?K:j,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>c,getTokenLength:()=>e-c,getTokenStartLine:()=>a,getTokenStartCharacter:()=>c-w,getTokenError:()=>u}}function B(n){return n===32||n===9}function A(n){return n===10||n===13}function _(n){return n>=48&&n<=57}var ue=new Array(20).fill(0).map((n,t)=>" ".repeat(t)),L=200,fe={" ":{"\n":new Array(L).fill(0).map((n,t)=>`
`+" ".repeat(t)),"\r":new Array(L).fill(0).map((n,t)=>"\r"+" ".repeat(t)),"\r\n":new Array(L).fill(0).map((n,t)=>`\r
`+" ".repeat(t))},"	":{"\n":new Array(L).fill(0).map((n,t)=>`
`+"	".repeat(t)),"\r":new Array(L).fill(0).map((n,t)=>"\r"+"	".repeat(t)),"\r\n":new Array(L).fill(0).map((n,t)=>`\r
`+"	".repeat(t))}};var H=v;function Y(n){return{getInitialState:()=>new N(null,null,!1,null),tokenize:(t,i)=>we(n,t,i)}}var $="delimiter.bracket.json",Q="delimiter.array.json",ce="delimiter.colon.json",ae="delimiter.comma.json",pe="keyword.json",me="keyword.json",ge="string.value.json",ke="number.json",be="string.key.json",Te="comment.block.json",he="comment.line.json",h=class n{constructor(t,i){this.parent=t,this.type=i}static pop(t){return t?t.parent:null}static push(t,i){return new n(t,i)}static equals(t,i){if(!t&&!i)return!0;if(!t||!i)return!1;for(;t&&i;){if(t===i)return!0;if(t.type!==i.type)return!1;t=t.parent,i=i.parent}return!0}},N=class n{constructor(t,i,e,o){this._state=t,this.scanError=i,this.lastWasColon=e,this.parents=o}clone(){return new n(this._state,this.scanError,this.lastWasColon,this.parents)}equals(t){return t===this?!0:!t||!(t instanceof n)?!1:this.scanError===t.scanError&&this.lastWasColon===t.lastWasColon&&h.equals(this.parents,t.parents)}getStateData(){return this._state}setStateData(t){this._state=t}};function we(n,t,i,e=0){let o=0,c=!1;switch(i.scanError){case 2:t='"'+t,o=1;break;case 1:t="/*"+t,o=2;break}let s=H(t),l=i.lastWasColon,a=i.parents,T={tokens:[],endState:i.clone()};for(;;){let w=e+s.getPosition(),u="",O=s.scan();if(O===17)break;if(w===e+s.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+t.substr(s.getPosition(),3));switch(c&&(w-=o),c=o>0,O){case 1:a=h.push(a,0),u=$,l=!1;break;case 2:a=h.pop(a),u=$,l=!1;break;case 3:a=h.push(a,1),u=Q,l=!1;break;case 4:a=h.pop(a),u=Q,l=!1;break;case 6:u=ce,l=!0;break;case 5:u=ae,l=!1;break;case 8:case 9:u=pe,l=!1;break;case 7:u=me,l=!1;break;case 10:let I=(a?a.type:0)===1;u=l||I?ge:be,l=!1;break;case 11:u=ke,l=!1;break}switch(O){case 12:u=he;break;case 13:u=Te;break}T.endState=new N(i.getStateData(),s.getTokenError(),l,a),T.tokens.push({startIndex:w,scopes:u})}return T}var g;function at(){return new Promise((n,t)=>{if(!g)return t("JSON not registered!");n(g)})}var S=class extends y{constructor(t,i,e){super(t,i,e.onDidChange),this._disposables.push(d.onWillDisposeModel(o=>{this._resetSchema(o.uri)})),this._disposables.push(d.onDidChangeModelLanguage(o=>{this._resetSchema(o.model.uri)}))}_resetSchema(t){this._worker().then(i=>{i.resetSchema(t.toString())})}};function pt(n){let t=[],i=[],e=new E(n);t.push(e),g=(...s)=>e.getLanguageServiceWorker(...s);function o(){let{languageId:s,modeConfiguration:l}=n;J(i),l.documentFormattingEdits&&i.push(b.registerDocumentFormattingEditProvider(s,new F(g))),l.documentRangeFormattingEdits&&i.push(b.registerDocumentRangeFormattingEditProvider(s,new M(g))),l.completionItems&&i.push(b.registerCompletionItemProvider(s,new R(g,[" ",":",'"']))),l.hovers&&i.push(b.registerHoverProvider(s,new V(g))),l.documentSymbols&&i.push(b.registerDocumentSymbolProvider(s,new W(g))),l.tokens&&i.push(b.setTokensProvider(s,Y(!0))),l.colors&&i.push(b.registerColorProvider(s,new P(g))),l.foldingRanges&&i.push(b.registerFoldingRangeProvider(s,new z(g))),l.diagnostics&&i.push(new S(s,g,n)),l.selectionRanges&&i.push(b.registerSelectionRangeProvider(s,new q(g)))}o(),t.push(b.setLanguageConfiguration(n.languageId,_e));let c=n.modeConfiguration;return n.onDidChange(s=>{s.modeConfiguration!==c&&(c=s.modeConfiguration,o())}),t.push(G(i)),G(t)}function G(n){return{dispose:()=>J(n)}}function J(n){for(;n.length;)n.pop().dispose()}var _e={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]};export{R as CompletionAdapter,ie as DefinitionAdapter,y as DiagnosticsAdapter,P as DocumentColorAdapter,F as DocumentFormattingEditProvider,te as DocumentHighlightAdapter,oe as DocumentLinkAdapter,M as DocumentRangeFormattingEditProvider,W as DocumentSymbolAdapter,z as FoldingRangeAdapter,V as HoverAdapter,re as ReferenceAdapter,se as RenameAdapter,q as SelectionRangeAdapter,E as WorkerManager,x as fromPosition,C as fromRange,at as getWorker,pt as setupMode,ee as toRange,ne as toTextEdit};
